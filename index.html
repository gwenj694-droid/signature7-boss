<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boss Creator Command Center | Signature7</title>
    <style>
        /* LUXE CEO AESTHETIC */
        body, html { 
            background-color: #000; 
            color: #D4AF37; 
            margin: 0; 
            padding: 0; 
            font-family: 'Garamond', serif; 
            height: 100vh; 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
        }
        
        header { 
            text-align: center; 
            padding: 10px 0; 
            border-bottom: 1px solid #D4AF37; 
            background: #000; 
            flex-shrink: 0; 
        }

        h1 { letter-spacing: 5px; font-weight: 300; margin: 0; font-size: 1.1rem; text-transform: uppercase; }

        .main-container { 
            display: flex; 
            flex-direction: column; 
            height: calc(100vh - 40px); 
        }
        
        /* AGENT SECTION */
        .agent-window { 
            flex: 2.5; 
            width: 100%; 
            background: #000; 
            position: relative; 
        }
        
        /* CONTROL BAR */
        .control-bar { 
            background: #111; 
            padding: 12px; 
            border-top: 1px solid #D4AF37; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 12px; 
            flex-wrap: wrap; 
        }

        input { 
            background: #000; 
            border: 1px solid #D4AF37; 
            color: #fff; 
            padding: 10px; 
            border-radius: 5px; 
            font-family: 'Garamond', serif; 
            font-size: 0.85rem; 
        }

        input:focus { outline: none; border-color: #fff; }
        
        .btn { 
            background: #D4AF37; 
            color: #000; 
            border: none; 
            padding: 10px 25px; 
            cursor: pointer; 
            font-weight: bold; 
            text-transform: uppercase; 
            font-size: 0.7rem; 
            border-radius: 5px; 
            transition: 0.3s; 
        }

        .btn:hover { background: #fff; transform: scale(1.02); }

        .btn-refresh {
            background: #000;
            color: #D4AF37;
            border: 1px solid #D4AF37;
        }

        /* VAULT SECTION */
        .vault-window { 
            flex: 1.5; 
            width: 100%; 
            background: #fff; 
            border-top: 2px solid #D4AF37; 
        }

        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

<header><h1>SIGNATURE 7 | BOSS CREATORS</h1></header>

<div class="main-container">
    <!-- THE FACE -->
    <div class="agent-window">
        <iframe 
            src="https://studio.d-id.com/agents/share?id=v2_agt_00PFfGo9&utm_source=copy&key=WjI5dloyeGxMVzloZFhSb01ud3hNREV6TXpnMU16WTNNakF3TVRjM01EUTJOemc2Tm10UVZGazFObkZEWVdRd2RVOXlRV3RHTlRWVg==&stt_silence_timeout=5000" 
            allow="microphone; camera; autoplay; encrypted-media; clipboard-write;">
        </iframe>
    </div>
    
    <!-- THE CONTROLS -->
    <div class="control-bar">
        <input type="email" id="email" placeholder="Enter Recipient Email" style="width: 220px;">
        <input type="text" id="dna" placeholder="Brand Essence (Silk, Luxury, etc.)" style="width: 250px;">
        <button class="btn" id="lockBtn" onclick="lockSession()">Secure & Activate Portal</button>
        <button class="btn btn-refresh" onclick="refreshVault()">Refresh Vault</button>
    </div>

    <!-- THE VAULT -->
    <div class="vault-window">
        <iframe id="vframe" src="https://docs.google.com/document/d/14RMLYQAbHVyoo9yLlwELcmf7T9A1_9XOwM_EnXFUt9A/preview"></iframe>
    </div>
</div>

<script>
    function lockSession() {
        const emailInput = document.getElementById('email').value;
        const dnaInput = document.getElementById('dna').value;
        const btn = document.getElementById('lockBtn');
        const vframe = document.getElementById('vframe');
        
        if(!emailInput || !emailInput.includes('@')) { 
            alert("Please enter a valid recipient email address."); 
            return; 
        }

        btn.innerText = "LOCKING DNA...";
        btn.style.opacity = "0.5";

        // This URL is your Google Script Web App URL
        const scriptURL = "https://script.google.com/macros/s/AKfycbzVMpWQS-8wlWY5bnGLFTlfjX526_QAchpZe_uL7Muo3jXm09n1DhpMu-KSfs20fXzRg/exec";
        
        // Push the data to the Script Properties (Version 12.0 logic)
        fetch(scriptURL, {
            method: "POST",
            mode: "no-cors",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ 
                type: "registration", 
                email: emailInput, 
                context: dnaInput 
            })
        });

        // We wait for Google to write the "RECIPIENT" line to the Doc
        setTimeout(() => {
            btn.innerText = "SYSTEM ACTIVE ðŸ¥‚";
            btn.style.background = "#fff";
            btn.style.color = "#000";
            btn.style.opacity = "1";
            
            // Refresh the vault window so you can see the email is locked in
            vframe.src += '';
        }, 2500);
    }

    function refreshVault() {
        document.getElementById('vframe').src += '';
    }
</script>

</body>
</html>
